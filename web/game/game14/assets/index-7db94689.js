import{E as S,G as I,j as L,C as O}from"./index-9b0a797c.js";function P(t){return S()?(I(t),!0):!1}function v(t){return typeof t=="function"?t():L(t)}const A=typeof window<"u",E=()=>{},k=C();function C(){var t;return A&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent)}function f(t){var i;const r=v(t);return(i=r==null?void 0:r.$el)!=null?i:r}const g=A?window:void 0;function w(...t){let i,r,o,a;if(typeof t[0]=="string"||Array.isArray(t[0])?([r,o,a]=t,i=g):[i,r,o,a]=t,!i)return E;Array.isArray(r)||(r=[r]),Array.isArray(o)||(o=[o]);const l=[],p=()=>{l.forEach(s=>s()),l.length=0},c=(s,d,e,n)=>(s.addEventListener(d,e,n),()=>s.removeEventListener(d,e,n)),m=O(()=>[f(i),v(a)],([s,d])=>{p(),s&&l.push(...r.flatMap(e=>o.map(n=>c(s,e,n,d))))},{immediate:!0,flush:"post"}),h=()=>{m(),p()};return P(h),h}let y=!1;function W(t,i,r={}){const{window:o=g,ignore:a=[],capture:l=!0,detectIframe:p=!1}=r;if(!o)return;k&&!y&&(y=!0,Array.from(o.document.body.children).forEach(e=>e.addEventListener("click",E)));let c=!0;const m=e=>a.some(n=>{if(typeof n=="string")return Array.from(o.document.querySelectorAll(n)).some(u=>u===e.target||e.composedPath().includes(u));{const u=f(n);return u&&(e.target===u||e.composedPath().includes(u))}}),s=[w(o,"click",e=>{const n=f(t);if(!(!n||n===e.target||e.composedPath().includes(n))){if(e.detail===0&&(c=!m(e)),!c){c=!0;return}i(e)}},{passive:!0,capture:l}),w(o,"pointerdown",e=>{const n=f(t);n&&(c=!e.composedPath().includes(n)&&!m(e))},{passive:!0}),p&&w(o,"blur",e=>{var n;const u=f(t);((n=o.document.activeElement)==null?void 0:n.tagName)==="IFRAME"&&!(u!=null&&u.contains(o.document.activeElement))&&i(e)})].filter(Boolean);return()=>s.forEach(e=>e())}export{W as o};
