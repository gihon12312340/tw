import{d as F,a as J,b as L,u as R,o as K,r as b,m as l,c as n,e as N,w as P,n as U,k as t,s as i,t as d,j as h,T as X,h as o,F as T,x as V,i as p,v as G,z as f,y as I,f as Y,p as Z,l as q,_ as ee}from"./index-9b0a797c.js";import{_ as se}from"./btn_continue-7c20a72a.js";import{v as m}from"./vPlayAudio-dc59f0e5.js";const x=u=>(Z("data-v-8ede72b9"),u=u(),q(),u),re={class:"game-wrapper game-stage-2"},ae={class:"question"},ce={class:"option-wrapper"},te=["onClick"],ne=["onClick"],de=["onClick"],oe={class:"current-points"},le=x(()=>t("span",{class:"small-text"},"分",-1)),ie={class:"modal"},pe=x(()=>t("h2",{class:"modal-title"},"第二關",-1)),fe=x(()=>t("p",{class:"modal-text"}," 遭遇了航行過程中的各種事件，你即將抵達了寶石魚出沒的神祕海域，然而此時卻出現了一隻巨大海怪阻擋在你眼前，你必須回答出正確的英文單字才能通過海怪的考驗，繼續尋找寶石魚的下落，答對一題得 10 分、答錯則扣 5 分。 ",-1)),he=F({__name:"GameStage2",setup(u){const _=J(),M=L(),$=R();K(()=>{A.value=!0,k.forEach(a=>a.selected=!1),C(1,y),C(2,v),C(3,S),Q.value=1});const A=b(!1),g=a=>{const s=[...a];for(let e=s.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[s[e],s[r]]=[s[r],s[e]]}return s},Q=b(0),k=l([...M.shuffleArray()]),y=l([...k.slice(0,6)]),j=g(y),v=l([...k.slice(6,12)]),B=g(v),S=l([...k.slice(12,18)]),D=g(S),c=l({Q1:{picked:[],answered:[]},Q2:{picked:[],answered:[]},Q3:{picked:[],answered:[]}}),O=l([{id:1,array:y,shuffledQuestions:j,comparedArray:c.Q1,checkedAnswers:!1},{id:2,array:v,shuffledQuestions:B,comparedArray:c.Q2,checkedAnswers:!1},{id:3,array:S,shuffledQuestions:D,comparedArray:c.Q3,checkedAnswers:!1}]),H=a=>{if(a===1||a===2)Q.value=a+1;else if(a===3)$.push("/stage3");else return},C=(a,s)=>{switch(a){case 1:for(let e=0;e<3;e++)c.Q1.picked.push(s[e].id);c.Q1.picked.sort(function(e,r){return e-r});break;case 2:for(let e=0;e<3;e++)c.Q2.picked.push(s[e].id);c.Q2.picked.sort(function(e,r){return e-r});break;case 3:for(let e=0;e<3;e++)c.Q3.picked.push(s[e].id);c.Q3.picked.sort(function(e,r){return e-r});break}},W=(a,s)=>{let e=[];switch(a){case 1:e=c.Q1.answered;break;case 2:e=c.Q2.answered;break;case 3:e=c.Q3.answered;break}e.includes(s)?e.splice(e.indexOf(s),1):e.push(s),e.sort((r,E)=>r-E)},w=b(""),z=a=>{w.value="";let s={picked:[],answered:[]};switch(a){case 1:s=c.Q1;break;case 2:s=c.Q2;break;case 3:s=c.Q3;break}if(s.answered.length!==3){w.value="請選擇 3 個選項";return}O[a-1].checkedAnswers=!0,JSON.stringify(s.picked)===JSON.stringify(s.answered)?_.handlePoints(10):_.handlePoints(-5)};return(a,s)=>(o(),n("section",re,[N(U,{tag:"div",class:"question-wrapper"},{default:P(()=>[(o(!0),n(T,null,V(O,e=>p((o(),n("div",{key:e.id,class:f(["questions",`question-${e}`])},[t("p",ae,[t("span",{class:f({correct:e.checkedAnswers===!0&&e.comparedArray.answered.includes(e.array[0].id)===!0,wrong:e.checkedAnswers===!0&&e.comparedArray.answered.includes(e.array[0].id)===!1})},"「 "+d(e.array[0].meaning[0].CH)+" 」",3),i(" 、 "),t("span",{class:f({correct:e.checkedAnswers===!0&&e.comparedArray.answered.includes(e.array[1].id)===!0,wrong:e.checkedAnswers===!0&&e.comparedArray.answered.includes(e.array[1].id)===!1})},"「 "+d(e.array[1].meaning[0].CH)+" 」",3),i(" 、 "),t("span",{class:f({correct:e.checkedAnswers===!0&&e.comparedArray.answered.includes(e.array[2].id)===!0,wrong:e.checkedAnswers===!0&&e.comparedArray.answered.includes(e.array[2].id)===!1})},"「 "+d(e.array[2].meaning[0].CH)+" 」",3)]),t("ul",ce,[(o(!0),n(T,null,V(e.shuffledQuestions,r=>p((o(),n("li",{key:r.id,class:f(["option",{selected:r.selected===!0,correct:e.checkedAnswers===!0&&e.comparedArray.picked.includes(r.id)===!0,wrong:e.checkedAnswers===!0&&e.comparedArray.picked.includes(r.id)===!1}]),onClick:()=>{e.checkedAnswers||(r.selected=!r.selected,W(e.id,r.id))}},[i(d(r.word)+" "+d(r.meaning[0].POS),1)],10,te)),[[h(m)]])),128))]),e.checkedAnswers?e.checkedAnswers?p((o(),n("span",{key:1,onClick:I(r=>H(e.id),["prevent"]),class:"option-btn"},[i("下一關")],8,de)),[[h(m)]]):Y("",!0):p((o(),n("span",{key:0,onClick:I(r=>z(e.id),["prevent"]),class:"option-btn"},[i("確認")],8,ne)),[[h(m)]]),t("p",{class:f(["option-warning",{"warning-animation":w.value!==""}])},d(w.value),3)],2)),[[G,Q.value===e.id]])),128))]),_:1}),t("span",oe,[i(d(h(_).points)+" ",1),le]),N(X,{name:"modal"},{default:P(()=>[p(t("div",ie,[pe,fe,p(t("img",{src:se,alt:"【按鈕】繼續",class:"modal-btn",onClick:s[0]||(s[0]=e=>A.value=!1),draggable:"false"},null,512),[[h(m)]])],512),[[G,A.value]])]),_:1})]))}});const me=ee(he,[["__scopeId","data-v-8ede72b9"]]);export{me as default};
