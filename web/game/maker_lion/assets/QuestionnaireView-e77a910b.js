import{d as N,G as R,u as D,a as Q,m as T,q as x,g as V,r as C,c as d,b as e,B as F,F as I,s as z,f as k,t as p,v as y,A as G,I as J,n as Y,o as v,C as m,J as M,p as H,j as K,_ as P}from"./index-ffeb9ba9.js";import{a as W}from"./axios-4a70c6fc.js";const u=h=>(H("data-v-8e9c0620"),h=h(),K(),h),X={class:"questionnaire-wrapper"},Z={key:0,class:"start"},q=u(()=>e("div",{class:"header"},[e("p",{class:"title"},"登入成功")],-1)),ee={class:"content"},te=u(()=>e("p",null,[m("你尚未養成任何梅克獅，"),e("br"),m("快來養一隻屬於你的小獅子吧！")],-1)),ae={key:0,class:"q-outer"},oe={class:"q-inner"},se=u(()=>e("p",{class:"foreword"},"在養成梅克獅之前，飼育員有幾個問題想問你：",-1)),ne={class:"question"},ie=["for"],re=["name","id","value","onUpdate:modelValue"],le=["for"],ce=["name","id","value","onUpdate:modelValue"],ue={key:2,class:"create"},de=u(()=>e("p",null,"最適合你的梅克獅是...",-1)),pe={class:"occupation"},ve={class:"name-wrapper"},fe=u(()=>e("label",{for:"lion-name"},"名稱",-1)),_e={class:"sex-wrapper"},me=u(()=>e("label",{class:"label",for:"lion-sex"},"性別",-1)),he=u(()=>e("option",{value:"",disabled:""},"請選擇性別",-1)),ge=["value"],xe=["value"],ye=N({__name:"QuestionnaireView",setup(h){const w=R(),r=D(),O=Q();T(()=>{O.lionInfo.id!==0&&w.replace("/"),r.handleLoading("off",1e3)});const a=x(0),$=V(()=>{if(a.value>=1&&a.value<=9)return"下一題";if(a.value===10)return"提交表單"}),g=x(),L=V(()=>{switch(g.value){case"farmer":return"小農獅";case"fisher":return"小漁獅";case"engineer":return"工程獅";case"actuary":return"精算獅";case"designer":return"設計獅";default:return""}}),S=[{id:1,title:"你擅長解決複雜的問題嗎?",options:[{text:"同意",value:!0,occupations:["engineer","actuary"]},{text:"不同意",value:!1,occupations:["farmer","fisher","designer"]}]},{id:2,title:"你可以比別人更快速算出數學問題嗎?",options:[{text:"同意",value:!0,occupations:["engineer","actuary"]},{text:"不同意",value:!1,occupations:["farmer","fisher","designer"]}]},{id:3,title:"你總是有許多不一樣的解決方案嗎?",options:[{text:"同意",value:!0,occupations:["engineer","actuary","designer"]},{text:"不同意",value:!1,occupations:["farmer","fisher"]}]},{id:4,title:"你喜歡自然生態勝過於人文景觀嗎?",options:[{text:"同意",value:!0,occupations:["farmer","fisher"]},{text:"不同意",value:!1,occupations:["engineer","actuary","designer"]}]},{id:5,title:"你喜歡打破規則且勇於改變嗎?",options:[{text:"同意",value:!0,occupations:["farmer","fisher","designer"]},{text:"不同意",value:!1,occupations:["engineer","actuary"]}]},{id:6,title:"你喜歡大家一起完成工作的感覺嗎?",options:[{text:"同意",value:!0,occupations:["fisher","engineer"]},{text:"不同意",value:!1,occupations:["farmer","actuary","designer"]}]},{id:7,title:"你會想嘗試野外求生嗎?",options:[{text:"同意",value:!0,occupations:["farmer","fisher"]},{text:"不同意",value:!1,occupations:["engineer","actuary","designer"]}]},{id:8,title:"你會安排長時間的讀書計畫嗎?",options:[{text:"同意",value:!0,occupations:["engineer","actuary"]},{text:"不同意",value:!1,occupations:["farmer","fisher","designer"]}]},{id:9,title:"你會盡力達成他人的要求嗎?",options:[{text:"同意",value:!0,occupations:["engineer","designer"]},{text:"不同意",value:!1,occupations:["farmer","fisher","actuary"]}]},{id:10,title:"你喜歡動手DIY嗎?",options:[{text:"同意",value:!0,occupations:["farmer","fisher","designer"]},{text:"不同意",value:!1,occupations:["engineer","actuary"]}]}],l=C({farmer:0,fisher:0,engineer:0,actuary:0,designer:0}),n=C([[],[],[],[],[],[],[],[],[],[]]),U=o=>{if(o>=1&&o<=9)if(n[o-1].length===0){r.message("warning","請作答！");return}else a.value+=1;else if(o===10){if(!n.every(i=>i.length>0)){r.message("warning","請完整做答！");return}for(const i of Object.keys(l))l[i]=0;for(let i=0;i<S.length;i++){const E=n[i];for(const b of Object.keys(l))l[b]+=1;for(const b of E)l[b]+=2}const t=Math.max(...Object.values(l)),c=Object.keys(l).filter(i=>l[i]===t),B=c[Math.floor(Math.random()*c.length)];g.value=B,a.value+=1}else return},f=x(""),_=x(""),j=()=>{a.value=0,g.value="",n.forEach((o,s)=>n[s]=[]),f.value="",_.value=""},A=async()=>{if(f.value===""||_.value===""){r.message("warning","請確實填寫每個欄位！");return}let o=0;switch(g.value){case"farmer":o=1;break;case"engineer":o=2;break;case"fisher":o=3;break;case"actuary":o=4;break;case"designer":o=5;break}try{await W.post("/lions",{name:f.value,gender:_.value==="male"?"boy":"girl",occupation_id:o},r.axiosConfig),r.message("success","角色建立成功！"),r.isLoading=!0,w.replace("/")}catch(s){console.error(s),r.message("error","角色建立失敗，請再次嘗試！")}};return(o,s)=>(v(),d("section",X,[e("div",{class:Y(["content-wrapper",{"light-border":a.value===0}])},[a.value===0?(v(),d("div",Z,[q,e("div",ee,[te,e("button",{type:"button",class:"btn btn-start",onClick:s[0]||(s[0]=F(t=>a.value+=1,["prevent"]))}," 開始測驗 ")])])):a.value>=1&&a.value<=10?(v(),d(I,{key:1},z(S,t=>(v(),d(I,{key:t.id},[t.id===a.value?(v(),d("div",ae,[e("div",oe,[se,e("p",ne,[m(p(t.title),1),e("span",null,"("+p(t.id)+"/10)",1)]),e("label",{for:`true_${t.id}`},[y(e("input",{type:"radio",name:`question_${t.id}`,id:`true_${t.id}`,class:"option",value:t.options[0].occupations,"onUpdate:modelValue":c=>n[t.id-1]=c},null,8,re),[[M,n[t.id-1]]]),m(" "+p(t.options[0].text),1)],8,ie),e("label",{for:`false_${t.id}`},[y(e("input",{type:"radio",name:`question_${t.id}`,id:`false_${t.id}`,class:"option",value:t.options[1].occupations,"onUpdate:modelValue":c=>n[t.id-1]=c},null,8,ce),[[M,n[t.id-1]]]),m(" "+p(t.options[1].text),1)],8,le),e("button",{type:"button",class:"btn btn-next",onClick:s[1]||(s[1]=c=>U(a.value))},p($.value),1)])])):k("",!0)],64))),64)):k("",!0),a.value===11?(v(),d("div",ue,[de,e("p",pe,p(L.value),1),e("div",ve,[fe,y(e("input",{type:"text",name:"lion-name",id:"lion-name",maxlength:"8",placeholder:"請輸入名稱","onUpdate:modelValue":s[2]||(s[2]=t=>f.value=t)},null,512),[[G,f.value]])]),e("div",_e,[me,y(e("select",{name:"lion-sex",id:"lion-sex","onUpdate:modelValue":s[3]||(s[3]=t=>_.value=t)},[he,e("option",{value:"male"},"公獅",8,ge),e("option",{value:"female"},"母獅",8,xe)],512),[[J,_.value]])]),e("div",{class:"footer"},[e("button",{type:"button",class:"btn btn-reset",onClick:j},"重新測驗"),e("button",{type:"button",class:"btn btn-create",onClick:A},"創建角色")])])):k("",!0)],2)]))}});const we=P(ye,[["__scopeId","data-v-8e9c0620"]]);export{we as default};
